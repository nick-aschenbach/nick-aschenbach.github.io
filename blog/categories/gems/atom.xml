<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Gems, | Aschenblog]]></title>
  <link href="http://nick-aschenbach.github.io/blog/categories/gems/atom.xml" rel="self"/>
  <link href="http://nick-aschenbach.github.io/"/>
  <updated>2014-09-29T20:31:48-07:00</updated>
  <id>http://nick-aschenbach.github.io/</id>
  <author>
    <name><![CDATA[Nick Aschenbach]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Building a Gem for RubyGems.org]]></title>
    <link href="http://nick-aschenbach.github.io/blog/2014/09/29/building-a-gem-for-rubygems-dot-org/"/>
    <updated>2014-09-29T18:49:06-07:00</updated>
    <id>http://nick-aschenbach.github.io/blog/2014/09/29/building-a-gem-for-rubygems-dot-org</id>
    <content type="html"><![CDATA[<p>We are going through some large code refactors at work and are building <a href="http://guides.rubyonrails.org/engines.html">rails engines</a>. This requires creating apps within our main app. Each sub-app resides in its own gem and is typically mounted or consumed in some way by the host application. While I work on several gems for different projects at work, I had never developed one from scratch and submitted it to <a href="http://rubygems.org/">RubyGems</a>. I took some previous work on a <a href="/blog/2014/07/20/text-messaging-made-easy-with-twilio/">SMS Scrabble cheater app</a> to help motivate the project.</p>

<p>Developing the skeleton for a gem is extremely easy:</p>

<!-- more -->


<p><code>
bundle gem foobar
</code></p>

<p>Several files are created:</p>

<p><code>
create  foobar/Rakefile
create  foobar/LICENSE.txt
create  foobar/README.md
create  foobar/.gitignore
create  foobar/foobar.gemspec
create  foobar/lib/foobar.rb
create  foobar/lib/foobar/version.rb
Initializing git repo in /Users/sela/workspace/foobar
</code></p>

<p>Let&rsquo;s take a look at the gemspec file:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='rb'><span class='line'><span class="o">&lt;</span><span class="sr">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sr">&lt;h1&gt;coding: utf-8&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;</span><span class="n">lib</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lsquo</span><span class="p">;</span><span class="o">.</span><span class="n">.</span><span class="o">/</span><span class="n">lib</span><span class="o">&amp;</span><span class="n">rsquo</span><span class="p">;,</span> <span class="o">&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="no">FILE</span><span class="o">&lt;</span><span class="sr">/strong&gt;)</span>
</span><span class='line'><span class="sr">$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)</span>
</span><span class='line'><span class="sr">require &amp;lsquo;foobar/</span><span class="n">version</span><span class="o">&amp;</span><span class="n">rsquo</span><span class="p">;</span><span class="o">&lt;</span><span class="sr">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sr">&lt;p&gt;Gem::Specification.new do |spec|</span>
</span><span class='line'><span class="sr">  spec.name          = &amp;ldquo;foobar&amp;rdquo;</span>
</span><span class='line'><span class="sr">  spec.version       = Foobar::VERSION</span>
</span><span class='line'><span class="sr">  spec.authors       = [&amp;ldquo;Nick Aschenbach&amp;rdquo;]</span>
</span><span class='line'><span class="sr">  spec.email         = [&amp;ldquo;&lt;a href=&quot;&amp;#109;&amp;#97;&amp;#x69;&amp;#x6c;&amp;#116;&amp;#x6f;&amp;#58;&amp;#x6e;&amp;#x69;&amp;#x63;&amp;#107;&amp;#x2e;&amp;#97;&amp;#115;&amp;#x63;&amp;#104;&amp;#x65;&amp;#x6e;&amp;#x62;&amp;#97;&amp;#99;&amp;#x68;&amp;#64;&amp;#x67;&amp;#x6d;&amp;#x61;&amp;#x69;&amp;#x6c;&amp;#46;&amp;#x63;&amp;#x6f;&amp;#x6d;&quot;&gt;&amp;#x6e;&amp;#105;&amp;#99;&amp;#x6b;&amp;#x2e;&amp;#97;&amp;#115;&amp;#x63;&amp;#104;&amp;#x65;&amp;#110;&amp;#98;&amp;#x61;&amp;#x63;&amp;#104;&amp;#64;&amp;#103;&amp;#x6d;&amp;#x61;&amp;#x69;&amp;#x6c;&amp;#x2e;&amp;#99;&amp;#111;&amp;#x6d;&lt;/</span><span class="n">a</span><span class="o">&gt;&amp;</span><span class="n">rdquo</span><span class="p">;</span><span class="o">]</span>
</span><span class='line'>  <span class="n">spec</span><span class="o">.</span><span class="n">summary</span>       <span class="o">=</span> <span class="sx">%q{TODO: Write a short summary. Required.}</span>
</span><span class='line'>  <span class="n">spec</span><span class="o">.</span><span class="n">description</span>   <span class="o">=</span> <span class="sx">%q{TODO: Write a longer description. Optional.}</span>
</span><span class='line'>  <span class="n">spec</span><span class="o">.</span><span class="n">homepage</span>      <span class="o">=</span> <span class="o">&amp;</span><span class="n">ldquo</span><span class="p">;</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="p">;</span>
</span><span class='line'>  <span class="n">spec</span><span class="o">.</span><span class="n">license</span>       <span class="o">=</span> <span class="o">&amp;</span><span class="n">ldquo</span><span class="p">;</span><span class="no">MIT</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="p">;</span><span class="o">&lt;</span><span class="sr">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sr">&lt;p&gt;  spec.files         = &lt;code&gt;git ls-files -z&lt;/</span><span class="n">code</span><span class="o">&gt;.</span><span class="n">split</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ldquo</span><span class="p">;\</span><span class="n">x0</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="p">;)</span>
</span><span class='line'>  <span class="n">spec</span><span class="o">.</span><span class="n">executables</span>   <span class="o">=</span> <span class="n">spec</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">grep</span><span class="p">(</span><span class="sr">%r{^bin/}</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="no">File</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">spec</span><span class="o">.</span><span class="n">test_files</span>    <span class="o">=</span> <span class="n">spec</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">grep</span><span class="p">(</span><span class="sr">%r{^(test|spec|features)/}</span><span class="p">)</span>
</span><span class='line'>  <span class="n">spec</span><span class="o">.</span><span class="n">require_paths</span> <span class="o">=</span> <span class="o">[&amp;</span><span class="n">ldquo</span><span class="p">;</span><span class="n">lib</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="p">;</span><span class="o">]&lt;</span><span class="sr">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sr">&lt;p&gt;  spec.add_development_dependency &amp;ldquo;bundler&amp;rdquo;, &amp;ldquo;~&gt; 1.6&amp;rdquo;</span>
</span><span class='line'><span class="sr">  spec.add_development_dependency &amp;ldquo;rake&amp;rdquo;</span>
</span><span class='line'><span class="sr">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Also a handy <code>README.md</code> file is created that shows users how to install the gem using bundler.</p>

<p>```
TODO: Write a gem description</p>

<h2>Installation</h2>

<p>Add this line to your application&rsquo;s Gemfile:</p>

<pre><code>gem 'foobar'
</code></pre>

<p>And then execute:</p>

<pre><code>$ bundle
</code></pre>

<p>Or install it yourself as:</p>

<pre><code>$ gem install foobar
</code></pre>

<h2>Usage</h2>

<p>TODO: Write usage instructions here</p>

<h2>Contributing</h2>

<ol>
<li>Fork it ( <a href="https://github.com/">https://github.com/</a>[my-github-username]/foobar/fork )</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create a new Pull Request
```</li>
</ol>


<p>I used this template for my <code>scrabble_score</code> gem. The full source code is available on <a href="https://github.com/nick-aschenbach/scrabble-score">Github</a>. The project is extremely simple and has the following structure:</p>

<p>```
.
├── Gemfile
├── Gemfile.lock
├── LICENSE.txt
├── README.md
├── assets
│   └── dictionary.txt
├── lib
│   ├── scrabble_score
│   │   ├── dictionary.rb
│   │   ├── letters.rb
│   │   ├── version.rb
│   │   └── word_finder.rb
│   └── scrabble_score.rb
├── scrabble_score.gemspec
└── spec</p>

<pre><code>├── assets
│   └── dictionary.txt
├── lib
│   └── scrabble_score
│       ├── dictionary_spec.rb
│       ├── letters_spec.rb
│       └── word_finder_spec.rb
└── spec_helper.rb
</code></pre>

<p>7 directories, 16 files
```</p>

<p>After getting my specs green and playing around with the code a bit, I went to generate the gem. First, let&rsquo;s upgrade to the latest RubyGems version:</p>

<p><code>
gem update --system
</code></p>

<p>Now, let&rsquo;s build the gem:</p>

<p><code>
gem build scrabble_score.gemspec
</code></p>

<p>The first time I ran this tool I received a handful of warnings:</p>

<p>```
WARNING:  no homepage specified
WARNING:  open-ended dependency on rspec (>= 0, development) is not recommended
  if rspec is semantically versioned, use:</p>

<pre><code>add_development_dependency 'rspec', '~&gt; 0'
</code></pre>

<p>WARNING:  open-ended dependency on simplecov (>= 0, development) is not recommended
  if simplecov is semantically versioned, use:</p>

<pre><code>add_development_dependency 'simplecov', '~&gt; 0'
</code></pre>

<p>WARNING:  See <a href="http://guides.rubygems.org/specification-reference/">http://guides.rubygems.org/specification-reference/</a> for help
  Successfully built RubyGem
  Name: scrabble_score
  Version: 0.1.0
  File: scrabble_score-0.1.0.gem
```</p>

<p>For the homepage I used the project&rsquo;s Github repository. I also added versions to the development dependencies:</p>

<p><code>
spec.add_development_dependency 'bundler', '~&gt; 1.6'
spec.add_development_dependency 'rspec', '3.0.0'
spec.add_development_dependency 'simplecov', '0.9.1'
</code></p>

<p>I deleted the <code>scrabble_score-0.1.0.gem</code> file and ran the <code>gem build</code> command again. Here is the output:</p>

<p><code>
  Successfully built RubyGem
  Name: scrabble_score
  Version: 0.1.0
  File: scrabble_score-0.1.0.gem
</code></p>

<p>Everything looks good, so I proceeded with the last step by running:</p>

<p><code>
gem push scrabble_score-0.1.0.gem
</code></p>

<p>Which created the following output:</p>

<p>```
Enter your RubyGems.org credentials.
Don&rsquo;t have an account yet? Create one at <a href="https://rubygems.org/sign_up">https://rubygems.org/sign_up</a>
   Email:   <a href="&#x6d;&#97;&#x69;&#108;&#x74;&#111;&#x3a;&#x6e;&#105;&#x63;&#x6b;&#x2e;&#x61;&#115;&#x63;&#104;&#101;&#x6e;&#x62;&#97;&#99;&#104;&#64;&#x67;&#x6d;&#x61;&#105;&#108;&#x2e;&#x63;&#x6f;&#109;">&#x6e;&#x69;&#99;&#107;&#x2e;&#97;&#x73;&#99;&#x68;&#101;&#x6e;&#98;&#97;&#99;&#x68;&#x40;&#x67;&#109;&#x61;&#x69;&#108;&#x2e;&#x63;&#x6f;&#x6d;</a>
Password:</p>

<p>Signed in.
Pushing gem to <a href="https://rubygems.org...">https://rubygems.org...</a>
Successfully registered gem: scrabble_score (0.1.0)
```</p>

<p>My experience creating a gem for RubyGems was a pleasant one. Please do a quick search to ensure that your gem name is unique before you get started. There are many guides out there for how to write gems. It is a good idea to take a look at one or two of these before getting started.</p>

<p>Happy gem cutting!</p>
]]></content>
  </entry>
  
</feed>
